{% extends "../base.html" %}

{% block title %}Create Datasource{% end %}

{% block extra_css %}

{% end %}

{% block extra_js %}
<script src="{{ static_url('lib/parsleyjs/dist/parsley.min.js') }}"></script>
<script type="text/javascript">
    function getCookie(name) {
        var r = document.cookie.match("\\b" + name + "=([^;]*)\\b");
        return r ? r[1] : undefined;
    }

    $('#form').parsley();
    $(document).on("keypress", ":not(.pac-input)", function(event) {
        return event.keyCode != 13;
    });
</script>
{% end %}

{% block body %}
<form id="form" method="post" autocomplete="off">
    {% if errors != False %}
    <div class="alert alert-danger">
      <strong>Error!</strong> {{ errors }}
    </div>
    {% end %}
    <div>
        <input name="ds_custom_name" data-parsley-trigger="focusout" data-parsley-maxlength="200" type="text" class="form-control" placeholder="Datasource Name" data-parsley-required="true"/>
    </div>
    <br>
    <div class="col-xs-12 col-sm-6 col-md-6 col-lg-12">
        <h2>Basic Information</h2>
        <div>
            <select name="ds_type" class="form-control">
                <option value="MySQL" selected>MySQL</option>
                <option value="Firebird">Firebird</option>
                <option value="Microsoft SQL Server">Microsoft SQL Server</option>
                <option value="Oracle">Oracle</option>
                <option value="PostgreSQL">PostgreSQL</option>
                <option value="Sybase">Sybase</option>
            </select>
        </div>
        <br>
        <div>
            <input name="ds_host" data-parsley-trigger="focusout" data-parsley-maxlength="200" type="text" class="form-control" placeholder="Host" data-parsley-required="true"/>
        </div>

        <div>
            <input name="ds_port" data-parsley-trigger="focusout" data-parsley-maxlength="6" type="text" class="form-control" placeholder="Port" data-parsley-required="true"/>
        </div>

        <div>
            <input name="ds_schema" data-parsley-trigger="focusout" data-parsley-maxlength="200" type="text" class="form-control" placeholder="Schema" data-parsley-required="false"/>
        </div>
        <br>
        <div>
            <input name="ds_user" data-parsley-trigger="focusout" data-parsley-maxlength="200" type="text" class="form-control" placeholder="User" data-parsley-required="true"/>
        </div>

        <div>
            <input name="ds_password" data-parsley-trigger="focusout" data-parsley-maxlength="200" type="password" class="form-control" placeholder="Password" data-parsley-required="true"/>
        </div>
    </div>

    <div class="col-xs-12 col-sm-6 col-md-6 col-lg-12">
        <h2>SSH Information</h2>
        <div>
            <input name="ssh_server" data-parsley-trigger="focusout" data-parsley-maxlength="200" type="text" class="form-control" placeholder="SSH Server" data-parsley-required="true"/>
        </div>
        <br>
        <div>
            <input name="ssh_port" data-parsley-trigger="focusout" data-parsley-maxlength="6" type="text" class="form-control" placeholder="Port" data-parsley-required="true"/>
        </div>

        <div>
            <input name="ssh_user" data-parsley-trigger="focusout" data-parsley-maxlength="200" type="text" class="form-control" placeholder="SSH User" data-parsley-required="true"/>
        </div>
        <div>
            <input name="ssh_pass" data-parsley-trigger="focusout" data-parsley-maxlength="200" type="text" class="form-control" placeholder="SSH Password" data-parsley-required="true"/>
        </div>

    </div>
    <div class="clearfix"></div>
    <br>
    {% module xsrf_form_html() %}
    <button type="submit" class="btn btn-primary btn-lg btn-block">Create Datasource</button>
</form>
<div class="clearfix"></div>
{% end %}